<?xml version="1.0" encoding="UTF-8"?>
<metamorph xmlns="http://www.culturegraph.org/metamorph"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1">
	<meta>
		<name>rdawrk</name>
	</meta>
	<rules>

		<combine name="@name1" value="${a}${b}${c}" flushWith="100??"
			reset="true">
			<data source="100??.a" name="a"/>
			<data source="100??.b" name="b"/>
			<data source="100??.c" name="c"/>
		</combine>

		<combine name="@name1" value="${a}${b}" flushWith="110??"
			reset="true">
			<data source="110??.a" name="a"/>
			<data source="110??.b" name="b"/>

		</combine>

		<combine name="@name1" value="${a}${c}${d}${e}" flushWith="111??"
			reset="true">
			<data source="111??.a" name="a"/>
			<data source="111??.c" name="c"/>
			<data source="111??.d" name="d"/>
			<data source="111??.e" name="e"/>
		</combine>

		<combine name="@name7" value="${a}${b}${c}" flushWith="700??"
			reset="true">
			<data source="700??.a" name="a"/>
			<data source="700??.b" name="b"/>
			<data source="700??.c" name="c"/>
		</combine>

		<combine name="@name7" value="${a}${b}" flushWith="710??"
			reset="true">
			<data source="710??.a" name="a"/>
			<data source="710??.b" name="b"/>

		</combine>

		<combine name="@name7" value="${a}${c}${d}${e}" flushWith="711??"
			reset="true">
			<data source="711??.a" name="a"/>
			<data source="711??.c" name="c"/>
			<data source="711??.d" name="d"/>
			<data source="711??.e" name="e"/>
		</combine>

		<combine name="@name7aut" value="${value}" reset="true">
			<combine name="value" value="${a}${b}${c}" flushWith="700??"
				reset="true">
				<data source="700??.a" name="a"/>
				<data source="700??.b" name="b"/>
				<data source="700??.c" name="c"/>
			</combine>
			<data source="700??.4" name="">
				<equals string="aut" />
			</data>

		</combine>

		<combine name="@name7aut" value="${value}" reset="true">
			<combine name="value" value="${a}${b}${c}" flushWith="710??"
				reset="true">
				<data source="710??.a" name="a"/>
				<data source="710??.b" name="b"/>
			</combine>
			<data source="710??.4" name="">
				<equals string="aut" />
			</data>
		</combine>

		<combine name="@name7aut" value="${value}" reset="true">
			<combine name="value" value="${a}${c}${d}${e}" flushWith="711??"
				reset="true">
				<data source="711??.a" name="a"/>
				<data source="711??.c" name="c"/>
				<data source="711??.d" name="d"/>
				<data source="711??.e" name="e"/>
			</combine>
			<data source="711??.4" name="">
				<equals string="aut" />
			</data>
		</combine>


		<combine name="key" value="${value}" flushWith="record">

			<combine name="value" value="${name}${title}">

				<choose name="name">
					<concat delimiter="" name="">
						<data source="@name1" />
						<data source="@name7aut" />
					</concat>
					<concat delimiter="" name="">
						<data source="@name7"/>
					</concat>
					<postprocess>
						<normalize-utf8 />
						<case to="lower" />
						<setreplace map="diac" />
						<setreplace map="namer" />
						<replace pattern="[\s,]" with="" />
					</postprocess>
				</choose>



				<choose name="title">
					<data source="130??.a"/>
					<data source="240??.a"/>
					<data source="730??.a"/>
					<data source="246?9.a"/>
					<data source="245??.a"/>
					<postprocess>
						<normalize-utf8 />
						<case to="lower" />
						<setreplace map="diac" />
						<setreplace map="titler" />
						<replace pattern="[,\s\-\.;\)\(\]\[ @!?/\\'&quot;]" with="" />
						<replace pattern="\s?bis\s?" with="-" />
					</postprocess>
				</choose>
			</combine>

			<data source="leader" name="Monograph or Item">
				<substring start="7" end="8" />
				<equals string="m" />
			</data>

			<data source="leader" name="not Part with dependent title">
				<substring start="19" end="20" />
				<not-equals string="c" />
			</data>

			<postprocess>
				<not-equals string="" />
			</postprocess>
		</combine>
	</rules>

	<maps>
		<map name="namer">
			<entry name="Mc" value="Mac" />
		</map>

		<map name="titler">
			<entry name="eins" value="1" />
			<entry name="zwei" value="2" />
			<entry name="drei" value="3" />
			<entry name="vier" value="4" />
			<entry name="fuenf" value="5" />
			<entry name="sechs" value="6" />
			<entry name="sieben" value="7" />
			<entry name="acht" value="8" />
			<entry name="neun" value="9" />
			<entry name="zehn" value="10" />
			<entry name="elf" value="11" />
			<entry name="zwoelf" value="12" />

			<entry name="erster" value="1." />
			<entry name="zweiter" value="2." />
			<entry name="dritter" value="3." />
			<entry name="vierter" value="4." />
			<entry name="fuenfter" value="5." />
			<entry name="sechster" value="6." />
			<entry name="siebter" value="7." />
			<entry name="achter" value="8." />
			<entry name="neunter" value="9." />
			<entry name="zehnter" value="10." />
			<entry name="elfter" value="11." />
			<entry name="zwoelfter" value="12." />

			<entry name="hundert" value="100" />
			<entry name="fünfundzwanzig" value="25" />
			<entry name="fünfzig" value="50" />

		</map>

		<map name="diac">
			<entry name="ä" value="ae" />
			<entry name="ü" value="ue" />
			<entry name="ö" value="oe" />
			<entry name="ß" value="ss" />
			<entry name="é" value="e" />
			<entry name="á" value="a" />
			<entry name="ë" value="e" />
			<entry name="ï" value="i" />
			<entry name="à" value="a" />
			<entry name="è" value="e" />
			<entry name="â" value="a" />
			<entry name="ê" value="e" />
			<entry name="å" value="a" />
			<entry name="æ" value="ae" />
			<entry name="ç" value="c" />
			<entry name="œ" value="oe" />
			<entry name="ñ" value="n" />
			<entry name="š" value="s" />
			<entry name="&amp;" value="u." />
			<entry name="und" value="u." />
			<entry name="+" value="u." />
			<entry name="" value="" />
			<entry name="" value="" />
		</map>
	</maps>

</metamorph>
